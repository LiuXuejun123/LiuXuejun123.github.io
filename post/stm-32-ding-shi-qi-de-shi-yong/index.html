
<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
<title>STM 32 定时器的使用 | Liu Xuejun&#39;s Blog</title>	

<link rel="stylesheet" href="https://liuxuejun123.github.io//styles/main.css">
<script type="text/javascript">
function getCSS()
{
        datetoday = new Date();
        timenow=datetoday.getTime();
        datetoday.setTime(timenow);
        thehour = datetoday.getHours();

        if (thehour<6)

            display = "https://liuxuejun123.github.io//media/css/night.css";

       else if (thehour>20)

            display = "https://liuxuejun123.github.io//media/css/night.css";   

        else if (thehour>6)
           
            display = "https://liuxuejun123.github.io//media/css/day.css";

        else if (thehour<20)

            display = "https://liuxuejun123.github.io//media/css/day.css";
      

var css = '<';
        css+='link rel="stylesheet" href='+display+' \/';
        css+='>';
        document.write(css);
}
</script>
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Liu+Jian+Mao+Cao&display=swap" rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://liuxuejun123.github.io//media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>wow=new WOW({boxClass:'wow',animateClass:'animated',offset:0,mobile:true,live:true});wow.init();</script>

<script type="text/javascript">
window.onload=getCSS();
</script>


 	
</head>
<body class="post-template-default single single-post postid-70 single-format-standard">
    <div id="wrapper">
        
			
		<header id="header" class="site-header" 
		
		>
			<div class="site-branding">
									<h1 class="site-title"><a href="https://liuxuejun123.github.io/" rel="home">Liu Xuejun&#39;s Blog</a></h1>
										
					<h2 class="site-description">念念不忘，必有回响</h2>
										
							</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
		 
     			
<li>
	 
	<a  href="/"> 首页</a></li>
	
    
     			
<li>
	 
	<a  href="/archives"> 归档</a></li>
	
    
     			
<li>
	 
	<a  href="/tags"> 标签</a></li>
	
    
     			
<li>
	 
	<a  href="/post/about"> 关于</a></li>
	
    

</ul>
</li>		
		
</ul>				</div>
			</nav>
						<div class="jingge">


    

    

    

    

    

    

    

    

    

    

    

    
        </header>

		<div id="content" class="container">
			<div class="row">
	<div class="col-md-8 site-main">
				
<article id="post-70" class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">

	
	                      
		<div class="entry-content">
			<h1 class="wow swing entry-title">STM 32 定时器的使用</h1>
<div class="entry-meta">
<div class="wow bounce">
	<i class="iconfont icon-rili"> <time class="lately-a" datetime="2020-04-29 23:10:10" itemprop="datePublished" pubdate="">2020-04-29</time></i>
	          </div>
			
</span>
													 
		</div>
                  
			<div class="wow slideInLeft entry-summary song">
				<p>In Proteus in an existing project, remove virtual terminal, add COMPIM (COM port Physical interface model) and connect it to the microcontroller. In COMPIM set correct real physical port and baudrates.<br>
Devices in project:<br>
• Microcontroller;<br>
• 2 LEDs;<br>
• Button;<br>
• COMPIM.<br>
In Keil, supplement the project for the microcontroller. Setup 2 timers with interrupt on update, one for reading states of button, second for periodic send data to other device (program in out case).<br>
Parts of task:</p>
<ol>
<li>Setup first timer with interrupt on update. In interrupt read state of button and change LEDs state depend on button.</li>
<li>Setup second timer with interrupt on update. It must be 100 interrupts is 1 second. In the interrupt handler increase some variables and call USART send function for send array (one item of the array must be increased variable).<br>
For receive data from microcontroller use Simulink model, and show received data in scope.</li>
</ol>
<p>This experiment is mainly to learn the timer configuration using stm32.</p>
<h2 id="1introduction-to-tim">1.Introduction to TIM</h2>
<p>Among them the basic timer includes TIM6, TIM7, its structure is the simplest, also has the most basic timing function, one is for basic timing, generating time base, and the other is for driving DAC digital-to-analog converter. Among them, there are 10 general-purpose timers including TIME2-TIME5 and TIME9-TIME14. In addition to the functions of the basic timer, the general-purpose timer also has input capture, output comparison, and PWM functions. he advanced timers include TIM1, TIM8; The related common register functions of the timer are as follows:</p>
<h3 id="11-clock-source-selection-register-timx_smcr">1.1 Clock source selection register (TIMx_SMCR)</h3>
<p>There are 4 clock sources for the timer:<br>
-Internal clock (CK_INT)<br>
-External clock mode 1: External input pin (TIx)<br>
-External clock mode 2: External trigger input (ETR), only applicable to TIM2, TIM3, TIM4<br>
-Internal trigger input (ITRx): Make A timer to be prescaler of B timer (A provides clock for B)<br>
This is selected by setting the relevant bit of TIMx_SMCR. The internal clock (CK_INT) comes from the APB1 or APB2 bus</p>
<h3 id="12-prescaler-register-timx_psc">1.2 Prescaler register (TIMx_PSC)</h3>
<p>This register is used to divide the clock and then provide it to the counter as the clock of the counter.</p>
<figure data-type="image" tabindex="1"><img src="https://liuxuejun123.github.io//post-images/1588173281702.PNG" alt="" loading="lazy"></figure>
<p>The 16-bit space stores the frequency division coefficient.</p>
<h3 id="13-timer-count-register-timx_cnt">1.3 Timer count register (TIMx_CNT)</h3>
<p>It stores the current count value of the timer.</p>
<h3 id="14-automatic-reload-register-timx_arr">1.4 Automatic reload register (TIMx_ARR)</h3>
<figure data-type="image" tabindex="2"><img src="https://liuxuejun123.github.io//post-images/1588173385400.PNG" alt="" loading="lazy"></figure>
<p>This register corresponds to two registers in the physical structure, one can be operated by the programmer, and the other is invisible and inoperable ARM called it as the shadow register. The shadow registers are actually in effect.<br>
According to the setting of the APRE bit in the TIMx_CR1 register: when APRE = 0, the contents of the preload register can be transferred to the shadow register at any time, and the two are connected at this time; and when APRE = 1, at each update event (UEV) Before the contents of the preload register (ARR) are transferred to the shadow register.</p>
<h3 id="15-dma-interrupt-enable-register-timx_dier">1.5 DMA / Interrupt Enable Register (TIMx_DIER)</h3>
<figure data-type="image" tabindex="3"><img src="https://liuxuejun123.github.io//post-images/1588173450494.PNG" alt="" loading="lazy"></figure>
<p>Here we only use the last bit: update interrupt enable (UIE: update interrupt enable), set to 1 instead to allow interrupts caused by update events</p>
<h3 id="16-control-register-1-timx_cr1">1.6 Control Register 1 (TIMx_CR1)</h3>
<figure data-type="image" tabindex="4"><img src="https://liuxuejun123.github.io//post-images/1588173463731.PNG" alt="" loading="lazy"></figure>
<p>We only need to use the last bit: the counter enable bit (CEN: counter enable), instead it must be set to 1 to enable the counter to start counting.</p>
<h3 id="17-status-register-timx_sr">1.7 Status register (TIMx_SR)</h3>
<p><img src="https://liuxuejun123.github.io//post-images/1588173472820.PNG" alt="" loading="lazy">![]</p>
<p>This register is used to mark whether various events / interrupts related to the current timer have occurred</p>
<h2 id="code">Code</h2>
<pre><code class="language-c">#include &quot;stm32f4xx.h&quot;
#include &quot;stm32f4xx_hal_gpio.h&quot;
#include &quot;stm32f4xx_hal_rcc.h&quot;
#include &lt;math.h&gt;
//define Internal RC frequencies
#define XTAL 16000000UL

//define busses prescalers
#define AHB_PRE 1
#define APB1_PRE 2
#define APB2_PRE 1
#define SysTickClk 10000

//calculate peripheral frequencies
#define SYSCLK 84000000
#define AHB SYSCLK/AHB_PRE
#define APB1 AHB/APB1_PRE
#define APB1_TIM APB1*2
#define APB2 AHB/APB2_PRE
#define APB2_TIM APB2*1
#define SysTicks AHB/SysTickClk

//usart
#define USART_BAUDRATE 19200
#define BUFFER_LENGTH 3
uint16_t buffer_size=0,current_send_byte;
uint8_t buffer[BUFFER_LENGTH];
//math
#define M_pi 3.1415926535897323846

void clock_set()
{
FLASH-&gt;ACR|=FLASH_ACR_PRFTEN;
FLASH-&gt;ACR|=FLASH_ACR_LATENCY_2WS;//FLASH PREFETCH
RCC-&gt;CFGR&amp;=~RCC_CFGR_HPRE_Msk;
RCC-&gt;CFGR|=RCC_CFGR_HPRE_DIV1;
RCC-&gt;CFGR&amp;=~RCC_CFGR_PPRE1_Msk;
RCC-&gt;CFGR|=RCC_CFGR_PPRE1_DIV2;
RCC-&gt;CFGR&amp;=~RCC_CFGR_PPRE2_Msk;
RCC-&gt;CFGR|=RCC_CFGR_PPRE2_DIV1;//set AHB APB1 APB2
RCC-&gt;PLLCFGR&amp;=~RCC_PLLCFGR_PLLM_Msk;
RCC-&gt;PLLCFGR|=8&lt;&lt;RCC_PLLCFGR_PLLM_Pos;
RCC-&gt;PLLCFGR&amp;=~RCC_PLLCFGR_PLLN_Msk;
RCC-&gt;PLLCFGR|=84&lt;&lt;RCC_PLLCFGR_PLLN_Pos;
RCC-&gt;PLLCFGR&amp;=~RCC_PLLCFGR_PLLP_Msk; //SET PLLM PLLN PLLP
RCC-&gt;CR|=RCC_CR_PLLON;//OPEN PLL
while((RCC-&gt;CR&amp;RCC_CR_PLLRDY)==0)//WAIT PLL START
{}
RCC-&gt;CFGR&amp;=(uint32_t)((uint32_t)~(RCC_CFGR_SW));
RCC-&gt;CFGR|=RCC_CFGR_SW_PLL;
while((RCC-&gt;CFGR&amp;RCC_CFGR_SWS)!=RCC_CFGR_SWS_PLL)
{}
}

void usart2_Init(uint32_t baud)
{
RCC-&gt;AHB1ENR |= RCC_AHB1ENR_GPIOAEN|
	              RCC_AHB1ENR_GPIOBEN;//open clock
GPIOA-&gt;MODER =0x000000A0;//pa2 pa3 	Multiple function mode
GPIOA-&gt;AFR[0]=0x00007700;//
GPIOB-&gt;MODER=0x00005555;//GPIOB
RCC-&gt;APB1ENR |= RCC_APB1ENR_USART2EN;//usart2 enable
USART2-&gt;BRR = APB1/baud;//Baudrate
USART2-&gt;CR1 = USART_CR1_UE|//usart2enable
	            USART_CR1_TE|//
	            USART_CR1_RE|//transmit receive enable
	            USART_CR1_RXNEIE;//Interrupt enable
NVIC_EnableIRQ(USART2_IRQn);//Configuration interrupt	
}

void SendByte(uint8_t dat)
{
	USART2-&gt;DR = dat;
	while((USART2-&gt;SR &amp; USART_SR_TC) == 0);
}

void Send_buffer(uint8_t *buff,uint16_t count)
{
for (int i=0;i&lt;count;i++)
	{
		SendByte(*buff);
		*buff++;
	}
}

void delay_ms(uint16_t time)     
{    
  uint16_t i=0;    
  while(time--)     
  {    
    i=12000;    
    while(i--);    
  }    
}
void USART2_IRQHandler(void)
{
	if(USART2-&gt;SR &amp; USART_SR_RXNE)
	{
		buffer[buffer_size] = USART2-&gt;DR;
		buffer_size++;
		if(buffer[buffer_size-1] == 'k')
		{
			GPIOB-&gt;ODR &amp;= ~(1 &lt;&lt;0); //LEN0 OFF
			buffer_size = 0;
			USART2-&gt;CR1 &amp;= ~USART_CR1_RE;
		}
		else if(USART2-&gt;DR == 'l')
		{
			GPIOB-&gt;ODR |= 1 &lt;&lt; 0; // LED0 ON
			buffer_size = 0;
			USART2-&gt;CR1 &amp;= ~USART_CR1_RE;
		}
	}
}
void TIM1_BRK_TIM9_IRQHandler(void)
{
TIM9-&gt;SR &amp;=~TIM_SR_UIF;
	if(!(GPIOB-&gt;IDR &amp; GPIO_IDR_ID9))
	{
	GPIOB-&gt;BSRR |= GPIO_BSRR_BS1;
	GPIOB-&gt;BSRR |= GPIO_BSRR_BR0;
	}
	else
	{
	GPIOB-&gt;BSRR |= GPIO_BSRR_BS0;
	GPIOB-&gt;BSRR |= GPIO_BSRR_BR1;
	}
}
void TIM1_UP_TIM10_IRQHandler(void)
{
  TIM10-&gt;SR &amp;=~TIM_SR_UIF;
	static uint8_t i=0;
	if(++i==100) i=0;
	double s=sin(i*2*M_pi/100);
	buffer[0]='A';
	buffer[1]=i;
	buffer[2]=(int8_t)(s*100);
	if(1)
	{
	Send_buffer(buffer,3);
	}
}
void Init_tim9(uint16_t arr,uint16_t psc)
{
	//OPEN TIM9
	RCC-&gt;APB2ENR |=1&lt;&lt;16;
	TIM9-&gt;CNT=0;//CLEAR 
	TIM9-&gt;PSC = psc;
	TIM9-&gt;ARR = arr;
/*Allow update interrupt enable*/
	TIM9-&gt;DIER |= 1&lt;&lt;0;
/*Enable basic timer interrupt*/
  NVIC_EnableIRQ(TIM1_BRK_TIM9_IRQn);
/*Turn on counter enable*/
  TIM9-&gt;CR1 |= 1&lt;&lt;0;
}
void Init_tim10(uint16_t arr,uint16_t psc)
{
	//OPEN TIM10
	RCC-&gt;APB2ENR |=1&lt;&lt;17;
	TIM10-&gt;CNT=0;//CLEAR 
	TIM10-&gt;PSC = psc;
	TIM10-&gt;ARR = arr;
/*Allow update interrupt enable*/
	TIM10-&gt;DIER |= 1&lt;&lt;0;
/*Enable basic timer interrupt*/
  NVIC_EnableIRQ(TIM1_UP_TIM10_IRQn);
/*Turn on counter enable*/
  TIM10-&gt;CR1 |= 1&lt;&lt;0;
}

int main()
{
	clock_set();
	usart2_Init(USART_BAUDRATE);
	Init_tim9(1000,84-1);//fre=84000000/84/1000    1000hz
	Init_tim10(10000,84-1);//fre=84000000/84/10000 100hz
while(1)
{}
}
</code></pre>
<h3 id="simulation">Simulation</h3>
<figure data-type="image" tabindex="5"><img src="https://liuxuejun123.github.io//post-images/1588173500577.PNG" alt="" loading="lazy"></figure>
<p>Press the switch to change the LED on and off</p>
<figure data-type="image" tabindex="6"><img src="https://liuxuejun123.github.io//post-images/1588173644598.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="7"><img src="https://liuxuejun123.github.io//post-images/1588173757806.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="8"><img src="https://liuxuejun123.github.io//post-images/1588173788729.PNG" alt="" loading="lazy"></figure>
<h2 id="conclusion">Conclusion</h2>
<p>Through this experiment, I learned the configuration of timers and the use of timer interrupts. And use Matlab simulink to observe the simulation situation through the virtual serial port. During the experiment, I also encountered some problems. Finding information through the Internet made me clearer about the whole process.</p>

							</div>
	<div class="wow bounceInDown vt-post-tags">
 
					</div>						
<nav class="navigation3 post-navigation3" role="navigation">
		
		<div class="nav-links3">
      
		<div class="wow bounceInLeft nav-previous3"><a href="https://liuxuejun123.github.io/post/stm32-h-qiao-qu-dong-dian-ji-chuan-kou-kong-zhi-jie-shou-matlabproteus-lian-he-diao-shi/" rel="prev"> STM32 H桥驱动电机，串口控制接收，Matlab+Proteus 联合调试</a></div>
		 
		 
		<div class="wow bounceInRight nav-next3"><a href="https://liuxuejun123.github.io/post/stm32f401re-pwm-shu-chu/" rel="next"> STM32F401RE PWM输出</a></div>
		
		</div>
	</nav>
	<div class="wow rollIn author-info" style="visibility: visible; animation-name: rollIn;">
	<div class="author-avatar pull-left"><img src="https://liuxuejun123.github.io//images/avatar.png" ></div>
 
	<div class="author-description"><div class="author-title"><div class="author-link" rel="author">INNovationlxj</div></div>


	<p class="author-bio">只有足够努力，才能看起来毫不费力</p></div></div>
	
		</div>
		
 
		
</article>

<div id="marlin_lite_about_widget-2" class="wow bounceInUp widget marlin_lite_about_widget" data-wow-delay="0.1s">
		
        
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://liuxuejun123.github.io//media/scripts/Valine.min.js'></script>

<div class="comment"></div>
<script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            
            admin_email:'liuxuejun0855@163.com',
            
            
      emoticon_list: ["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],
     	
      	
          
        });
    </script> 


   
  
 

		</div>

			</div>
			


<div class="tocc col l3 hide-on-med-and-down">
	
        <div class="toc-widget">
			
            <div class="toc-title"></div>
			
            <div id="toc-content">
			
			
			</div>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>										 

 
       


			</div>
		</div>

		
		 	<footer id="colophon" class="site-footer">

			<div class="container">
	
				<div class="copyright">Powered by 
<a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<br><br>
Copyright 2020 &copy 
<a href="https://twitter.com/mei_samson" target="_blank">
<span style="color:blue">Liuxuejun</span></a>
<br><br>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="blank"
<span style="color:orange">本博客采用 CC BY-NC-SA 4.0 进行许可</span></a><br>Theme:   <a href="https://github.com/shanbufun/gridea-theme-pan" target="_blank" title="Pan"><span>Pan</span></a>.  by <a href="https://shanbu.fun/" target="_blank"  title="山卜方" >Shanbufun</a></div>		
			</div>
		
		</footer>

</div>

<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script type='text/javascript' src='https://liuxuejun123.github.io//media/scripts/marlin-scripts.js'></script>
 <script src="//tokinx.github.io/lately/lately.min.js"></script>
  <script>jQuery(document).ready(function(){$.lately({'target':'.lately-a,.lately-b,.lately-c'})});</script>
  <style type="text/css">a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
}

a.back_to_top span {
    color: #888;
}

a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
}

a.back_to_top:hover span {
    color: #555;
}

@media print, screen and (max-width: 580px) {
    .back_to_top {
        display: none !important;
    }
}



</style><a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>


<script>$(document).ready((function(_this) {
  return function() {
    var bt;
    bt = $('#back_to_top');
    if ($(document).width() > 480) {
      $(window).scroll(function() {
        var st;
        st = $(window).scrollTop();
        if (st > 30) {
          return bt.css('display', 'block');
        } else {
          return bt.css('display', 'none');
        }
      });
      return bt.click(function() {
        $('body,html').animate({
          scrollTop: 0
        }, 800);
        return false;
      });
    }
  };
})(this));
</script>

		<script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $('.navigation:eq(0)').remove();
                $("").attr("rel" , "external");
                $("a[rel='external'],a[rel='external nofollow']").attr("target","_blank");
                $("a.vi").attr("rel" , "");
                $.viewImage({
                    'target'  : 'img',
                    'exclude' : '.vsmile-icons img,.gallery img',
                    'delay'   : 300
                });
                $.lately({
                    'target' : '.commentmetadata a,.infos time,.post-list time'
                });
                prettyPrint();
                
                $('ul.links li a').each(function(){
                    if($(this).parent().find('.bg').length==0){
                        $(this).parent().append('<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain='+$(this).attr("href")+')"></div>--->')
                    }
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>

</body>
</html>
